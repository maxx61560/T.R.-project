<!-- Code made by Max Vilà Ruiz -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Content Page</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin> 
    <link href="https://fonts.googleapis.com/css2?family=Sora:wght@300&display=swap" rel="stylesheet"> <!-- Font for texts -->
    <link href="https://fonts.googleapis.com/css2?family=Patua+One&display=swap" rel="stylesheet"> <!-- Font for titles -->

    <link rel="stylesheet" href="/css/Style.css"> <!-- CSS document -->
</head>

<body class="body">
    <header class="header">
        <div name="Background Header Image" class="header_backGroundImg">
            <div class="titles">
                <h1>Benvingut/da <span id="span_name"></span></h1>
            </div>
            <p class="description">Lorem ipsum dolor sit, amet consectetur adipisicing elit. Dolor earum et debitis obcaecati similique nemo voluptatem explicabo, unde sint quia?</p>
        </div>
    </header>

    <main>
        <div class="label_eventContentPage">
            <div class="event_initialPosition"></div> <!-- Is useful to determine the initial position of all the elements of the event. -->

            <div class="event_difficulty"></div> <!-- <p class="event_difficulty_name">Dificil, Normal o Fàcil</p> Better alternative: see the grade of the difficulty when you put the mourse on de color -->

            <p class="event_elem event_name">Nom de l'esdeveniment</p>

            <div name="Due Date" class="event_elem">
            <!-- <p class="event_date_type">Diari, Setmanal, Mensual, Trimestral, Semestral o Anual</p> To choose (target type) -->
                <p class="event_dateTxt">Data de venciment:</p>
                <p class="event_date">dd/mm/aaaa</p>
            </div>

            <a href="EventPage.html" class="event_elem a_seeMore_contentPage">Veure més</a> <!-- Better alternative: you can click the whole event to see more information about it -->

            <div class="event_initialPosition"></div> <!-- Is useful to determine the initial position of all the elements of the event. -->

            <div name="Button Group">
                <button class="button buttonGroup_contentPage button_done" name="Done" onclick="">
                    <img src="img/tick.jpeg" class="img_buttonGroup_event">
                </button>
                <button class="button buttonGroup_contentPage button_delete_contentPage" name="Delete" onclick="">
                    <img src="img/bin.jpeg" class="img_buttonGroup_event">
                </button>
            </div>
        </div>



        <form onsubmit="event.preventDefault();onSubmit();" autocomplete="off">
            <br/>
            <br/>
            <div class="caja">
              <label for="nom">Nombre</label> <input type="text" id="nom" placeholder="Escriba aqui" required>
              <label for="ape">Apellido</label> <input type="text" id="ape" placeholder="Escriba aqui" required>
              <label for="pais">País</label> <input type="text" id="pais" placeholder="Escriba aqui" required>
            </div>
            <br/>
            <input class="submit" type="submit" value="Escribir">
            </form>


<div class="tablita">
    <table class="tabla" id="tabla">
      <thead>
        <tr> 
          <th>Nombre</th> 
          <th>Apellido</th>
          <th>País</th>
          <th>Opciones</th>
        </tr>
      </thead>
        <tbody>

        </tbody>
    </table>
  </div>



        


    </main>


    <script>
        var Fila = null
function onSubmit() {
        let DataForm = Leer()
        if (Fila == null){
            InsertarDatos(DataForm)
        } else{
            Actualizar(DataForm)
            Vaciar()
    }
}
function Leer() {
    let DataForm = {}
    DataForm["nom"] = document.getElementById("nom").value
    DataForm["ape"] = document.getElementById("ape").value
    DataForm["pais"] = document.getElementById("pais").value
    return DataForm
}
function InsertarDatos(data) {
    let table = document.getElementById("tabla").getElementsByTagName('tbody')[0]
    let Fila = table.insertRow(table.length)
    columna1 = Fila.insertCell(0).innerHTML = data.nom
    columna2 = Fila.insertCell(1).innerHTML = data.ape
    columna3 = Fila.insertCell(2).innerHTML = data.pais
    columna3 = Fila.insertCell(3).innerHTML = `<input class="submit" type="button" onClick="Editarr(this)" value="Editar" >
                                            <input class="submit" type="button" onClick="Borrarr(this)" value="Borrar" >`
    document.getElementById("nom").focus()
    Vaciar()
}
function Vaciar() {
    document.getElementById("nom").value = ""
    document.getElementById("ape").value = ""
    document.getElementById("pais").value = ""
    Fila = null
}
function Editarr(td) {
    Fila = td.parentElement.parentElement
    document.getElementById("nom").value = Fila.cells[0].innerHTML
    document.getElementById("ape").value = Fila.cells[1].innerHTML
    document.getElementById("pais").value = Fila.cells[2].innerHTML
}
function Actualizar(DataForm) {
    Fila.cells[0].innerHTML = DataForm.nom
    Fila.cells[1].innerHTML = DataForm.ape
    Fila.cells[2].innerHTML = DataForm.pais
    document.getElementById("nom").focus()
}
function Borrarr(td) {
    if (confirm('¿Seguro de borrar este registro?')) {
        row = td.parentElement.parentElement
        document.getElementById("tabla").deleteRow(row.rowIndex)
        Vaciar()
    }
}
    </script>




    <script>
        const span_name = document.querySelector('#span_name');
        const valorLocalStorage = localStorage.getItem('name');
        if(valorLocalStorage){
            span_name.textContent = valorLocalStorage;
        } else{
            span_name.textContent = '--';
        }
    </script>

</body>
</html>